"use strict";angular.module("hop",["ngAnimate","ngCookies","ngTouch","ngSanitize","ui.router","ui.bootstrap","dachu.widget"]),angular.module("hop").controller("LoginCtrl",["$scope","req","$location","$cookieStore",function(t,e,o,a){t.user={mobile:"",password:""},t.message={text:"",status:""},t.login=function(){if(t.loginForm.$invalid)return t.loginForm.submitted=!0,!1;var o=function(o){return 0!==parseInt(o.status)?(t.error={cls:"alert alert-danger",msg:o.msg},!1):(a.put("type",o.info.type),a.put("id",o.info.id),localStorage.setItem("access",o.access),e.redirect(e.refer),void 0)};e.getdata("user/login","POST",o,t.user)}}]),angular.module("hop").controller("UserListCtrl",["$location","dialog","req","$scope",function(t,e,o,a){a.dateOptions={formatYear:"yy",startingDay:1},a.endDateOptions={formatYear:"yy",startingDay:1},a.endOpened=a.opened=!1,a.open=function(t){t.preventDefault(),t.stopPropagation(),a.opened=!0},a.endOpen=function(t){t.preventDefault(),t.stopPropagation(),a.endOpened=!0};var s=function(){o.getdata("user/role_list","POST",function(t){0==t.status&&(a.role_list=t.role_list)})},l=function(){var t=a.role?a.role.id:0,e={roleId:t,searchValue:a.searchValue,startTime:Date.parse(a.startTime),endTime:Date.parse(a.endTime),currentPage:a.paginationConf.currentPage,itemsPerPage:a.paginationConf.itemsPerPage};o.getdata("user/lists","POST",function(t){0==t.status&&(a.paginationConf.totalItems=t.total,a.list=t.list)},e)};a.paginationConf={currentPage:1,itemsPerPage:15},a.$watch("paginationConf.currentPage + paginationConf.itemsPerPage",l),a.search=function(){l()},a.reset=function(){a.searchValue="",a.startTime="",a.endTime="",l()},a.setStatus=function(t,s){var l="禁用";1==s&&(l="启用"),e.tips({actionText:"确定",bodyText:"确定"+l+"["+a.list[t].name+"]账号吗?",ok:function(){o.getdata("user/toggle_status","POST",function(o){0==o.status?(e.tips({bodyText:"操作成功！"}),a.list[t].status=s):e.tips({bodyText:"操作失败！"})},{uid:a.list[t].id,status:s})}})},a.resetPassword=function(t){e.tips({actionText:"确定",bodyText:"确定重置用户["+a.list[t].name+"]的密码吗?",ok:function(){o.getdata("user/reset_password","POST",function(t){e.tips(0==t.status?{bodyText:"密码重置成功！"}:{bodyText:"密码重置失败！"})},{uid:a.list[t].id})}})},a.delete=function(t){e.tips({actionText:"确定",bodyText:"确定删除用户["+a.list[t].name+"]吗?",ok:function(){o.getdata("user/delete","POST",function(t){0==t.status?(e.tips({bodyText:"删除成功！"}),l()):e.tips({bodyText:"删除失败！"+t.msg})},{id:a.list[t].id})}})};var n=function(){var e=t.$$host,o="http://api.dachuwang.com/";0!==e.indexOf("hop.dachuwang.com")&&(o="http://api.dachuwang.net/");var s=o+"hop/user/export_data?1=1";a.role&&(s+="&userType="+a.role.id),a.status&&(s+="&status="+a.status),a.key&&(s+="&key="+a.key),a.startTime&&(s+="&startTime="+Date.parse(a.startTime)),a.endTime&&(s+="&endTime="+Date.parse(a.endTime)),window.open(s)};a.exportData=function(){e.tips({headerText:"导出数据",actionText:"确定",bodyText:"确定导出数据吗?",ok:function(){n()}})},s()}]),angular.module("hop").controller("UserEditCtrl",["$location","dialog","req","$scope","$stateParams",function(t,e,o,a,s){var l=function(){a.id=s.id;var t={id:a.id};o.getdata("user/edit_input","POST",function(t){0==t.status&&(a.data=t.info,a.dept_list=t.dept_list,a.role_list=t.role_list,a.province_list=t.province_list,angular.forEach(a.dept_list,function(e){e.id==t.info.dept_id&&(a.data.dept=e)}),angular.forEach(a.role_list,function(e){e.id==t.info.role_id&&(a.data.role=e)}),angular.forEach(a.province_list,function(e){e.id==t.info.province_id&&(a.data.province=e)}))},t)};a.edit=function(){if(a.show_error=!0,a.basic_form.$setDirty(),!a.basic_form.$invalid){var t={id:a.data.id,deptId:a.data.dept.id,roleId:a.data.role.id,name:a.data.name,mobile:a.data.mobile,provinceId:a.data.province.id,address:a.data.address};o.getdata("/user/edit","POST",function(t){0==t.status?(e.tips({bodyText:"修改用户成功！"}),o.redirect("/user/list")):e.tips({bodyText:"修改用户失败。"})},t)}},l()}]),angular.module("hop").controller("UserCreateCtrl",["$location","dialog","req","$scope","$stateParams",function(t,e,o,a){var s=function(){o.getdata("/user/create_input","POST",function(t){0==t.status&&(a.dept_list=t.dept_list,a.role_list=t.role_list,a.province_list=t.province_list)})};a.create=function(){if(a.show_error=!0,a.basic_form.$setDirty(),!a.basic_form.$invalid){var t={deptId:a.data.dept.id,roleId:a.data.role.id,name:a.data.name,mobile:a.data.mobile,provinceId:a.data.province.id,address:a.data.address};o.getdata("/user/create","POST",function(t){0==t.status?(e.tips({bodyText:"添加用户成功！"}),o.redirect("/user/list")):e.tips({bodyText:"添加用户失败。"})},t)}},s()}]),angular.module("hop").controller("PropertyEditCtrl",["$scope","req","daChuDialog","daChuLocal","daChuTimer",function(t,e){var o=0;o&&e.getdata("property/prop_single","POST",function(e){e.info.options.length>0&&(t.property_values=[]),t.saveData.id=e.info.id,t.saveData.unit=e.info.unit,t.saveData.name=e.info.name,angular.forEach(t.top_category,function(o){o.id==e.info.top_category.id&&(t.top=o)}),t.getSecond(t.top.id,e.info.second_category.id),t.getroduct(e.info.second_category.id,e.info.self.id),getTypeList(e.info.type),angular.forEach(t.requires,function(o){o.val==e.info.isrequired&&(t.property_required=o)}),angular.forEach(e.info.options,function(e,o){if(0==o){var a={name:"添加",value:e.name,icon:"glyphicon-plus",cls:"btn-info",clk:"add"};t.property_values.push(a)}else t.add(o,e.name)})},{id:o})}]),angular.module("hop").controller("PropertyAddCtrl",["$scope","req","dialog","daChuLocal","daChuTimer",function(t,e,o,a,s){function l(){t.secondCategory=[],t.productCategory=[]}function n(e){t.topCategory=e.top,t.seconds=e.second,t.secondChild=e.second_child}function i(){var t=a.get("cateList"),o=a.get("cateListTime");t&&s.compare(o)?n(t):e.getdata("/category/lists","GET",function(t){-1!=parseInt(t.status)&&t.list.top.length>0&&(a.set("cateList",t.list),a.set("cateListTime",s.getNow()),n(t.list))})}function c(o){e.getdata("property/get_type","GET",function(e){t.properties=e.list,angular.forEach(t.properties,function(e){e.val==o&&(t.propertyShow=e)})})}t.topCategory=[],t.properties=[],t.propertyShow=[],t.propertyType=0,t.top="",t.title="添加规格",t.requires=[{name:"是",val:1},{name:"否",val:0}],t.saveData={input_type:1,category_id:0,name:"",id:0,is_required:0,options:[]},t.initValues={name:"添加",value:"",icon:"glyphicon-plus",cls:"btn-info",clk:"add"},t.propertyValues=[t.initValues],l(),t.getSecond=function(){if(void 0!==t.top){var e=parseInt(t.top.id);t.secondCategory=t.seconds[e]}},t.getProduct=function(){if(void 0!==t.second){var e=parseInt(t.second.id);t.productCategory=t.secondChild[e]}},i(),c(),t.add=function(e,o){void 0==o&&(o="");var a={name:"删除",value:o,icon:"glyphicon-minus",cls:"btn-danger",clk:"remove"};t.propertyValues.push(a)},t.remove=function(e){t.propertyValues.splice(e,1)},t.setProType=function(){t.propertyValues=0==t.propertyShow.val?[]:[t.initValues]},t.createProperty=function(){var a=[];return t.saveData.is_required=t.propertyRequired.val,t.saveData.category_id=void 0==t.products?void 0==t.second?t.top.id:t.second.id:t.product.id,t.saveData.input_type=t.propertyShow.val,angular.forEach(t.propertyValues,function(t){a.push(t.value)}),t.saveData.options=a,t.saveData.name.length?void e.getdata("property/create","POST",function(t){0==t.status&&(l(),o.tips({bodyText:t.msg,close:function(){e.redirect("/property")}}))},t.saveData):!1},t.reback=function(){e.redirect("/user/center")}}]),angular.module("hop").controller("PropertyCtrl",["$scope","req","dialog",function(t,e,o){t.paginationConf={currentPage:1,itemsPerPage:15},t.title="规格列表";var a=function(){var o={currentPage:t.paginationConf.currentPage,itemsPerPage:t.paginationConf.itemsPerPage};e.getdata("property/lists","POST",function(e){t.list=e.list,t.paginationConf.totalItems=e.total},o)};t.$watch("paginationConf.currentPage + paginationConf.itemsPerPage",a),t.setStatus=function(a,s){var l=t.list[a].id;if(s=parseInt(s),0===s||1===s){t.list[a].status=s;var n="property/del",i="禁用成功";1===s&&(n="property/reuse",i="启用成功"),e.getdata(n,"POST",function(){o.tips({bodyText:i})},{id:l})}}}]),angular.module("hop").controller("HomeAchieveCtrl",["dialog","req","$scope","$modal","$window","$cookieStore","HopAuth",function(t,e,o){o.data="",e.getdata("hop/summary/index","GET",function(t){0==t.status&&(o.data=t.data)})}]),angular.module("hop").controller("HomeCtrl",["$scope",function(t){t.awesomeThings=[{title:"AngularJS",url:"https://angularjs.org/",description:"HTML enhanced for web apps!",logo:"angular.png"},{title:"BrowserSync",url:"http://browsersync.io/",description:"Time-saving synchronised browser testing.",logo:"browsersync.png"},{title:"GulpJS",url:"http://gulpjs.com/",description:"The streaming build system.",logo:"gulp.png"},{title:"Jasmine",url:"http://jasmine.github.io/",description:"Behavior-Driven JavaScript.",logo:"jasmine.png"},{title:"Karma",url:"http://karma-runner.github.io/",description:"Spectacular Test Runner for JavaScript.",logo:"karma.png"},{title:"Protractor",url:"https://github.com/angular/protractor",description:"End to end test framework for AngularJS applications built on top of WebDriverJS.",logo:"protractor.png"},{title:"Bootstrap",url:"http://getbootstrap.com/",description:"Bootstrap is the most popular HTML, CSS, and JS framework for developing responsive, mobile first projects on the web.",logo:"bootstrap.png"},{title:"Angular UI Bootstrap",url:"http://angular-ui.github.io/bootstrap/",description:"Bootstrap components written in pure AngularJS by the AngularUI Team.",logo:"ui-bootstrap.png"},{title:"Stylus",url:"http://learnboost.github.io/stylus/",description:"Stylus is a revolutionary new language, providing an efficient, dynamic, and expressive way to generate CSS. Supporting both an indented syntax and regular CSS style.",logo:"stylus.png"}],angular.forEach(t.awesomeThings,function(t){t.rank=Math.random()})}]),angular.module("hop").controller("GoodsCtrl",["$scope","req","dialog","appConfigure","$cookieStore",function(t,e,o,a,s){t.site_url=a.url,t.status="all";var l=function(){var o=s.get("productCookie")||"";t.key=o;var a={currentPage:t.paginationConf.currentPage,itemsPerPage:t.paginationConf.itemsPerPage,searchVal:t.key,status:t.status};e.getdata("/sku/manage","POST",function(e){t.products=e.list,t.paginationConf.totalItems=e.total},a)};t.title="商品列表",t.paginationConf={currentPage:1,itemsPerPage:15},t.search=function(){s.put("productCookie",t.key),l()},t.reset=function(){s.remove("productCookie"),t.key="",l()},t.filterByStatus=function(e){t.status=e,l()},t.$watch("paginationConf.currentPage + paginationConf.itemsPerPage",l),t.dialog=o.tips,t.setstatus=function(o,a,s){t.products[s].status=a,e.getdata("sku/set_status","POST",function(){t.dialog(1===parseInt(a)?{bodyText:"可以发布此货号的商品了。"}:{bodyText:"不能发布、编辑此货号商品了。"})},{status:a,id:o})}}]),angular.module("hop").controller("GoodsEditCtrl",["$scope","$stateParams","req","$location","$cookieStore","dialog","daChuLocal","daChuTimer",function(t,e,o,a,s,l,n,i){function c(e,o){t.topCategory=e.top,t.seconds=e.second,t.thirdChild=e.third_child,t.secondChild=e.second_child,o&&(angular.forEach(t.topCategory,function(e){parseInt(e.id)===parseInt(o[0])&&(t.init.category_id=e)}),t.init.category_id&&(t.secondCategory=t.seconds[t.init.category_id.id],angular.forEach(t.secondCategory,function(e){parseInt(e.id)===parseInt(o[1])&&(t.init.childid=e)})),t.init.childid&&(t.productCategory=t.secondChild[t.init.childid.id],angular.forEach(t.productCategory,function(e){parseInt(e.id)===parseInt(o[2])&&(t.init.productid=e)})))}t.productsChild=[];var r=e.productId;t.title="编辑货号",t.product={title:"",id:r,category_id:"",spec:[]},t.init={category_id:"",childid:"",productid:"",selfProduct:"",spec:[]},t.buttons=[{name:"保存",type:"submit",clk:"add",cls:"btn-success"},{name:"返回",type:"reset",clk:"reback",cls:"btn-default"}];var d=function(e,a){o.getdata("property/cate_prop_list","POST",function(e){0===parseInt(e.status)?t.properties=e.list:"secondChild"==a?d(t.init.category_id.id,"seconds"):"thirdChild"==a&&d(t.init.childid.id,"secondChild")},{category_id:e})},p=function(){o.getdata("sku/info","POST",function(e){u(e.info.path_arr),t.product.title=e.info.name,t.properties=e.info.properties,angular.forEach(e.info.spec,function(e){t.init.spec[e.id]=e.val})},{id:r})},u=function(t){var e=n.get("cateList"),a=n.get("cateListTime");e&&i.compare(a)?c(e,t):o.getdata("category/lists","GET",function(e){-1!=parseInt(e.status)&&e.list.top.length>0&&(n.set("cateList",e.list),n.set("cateListTime",i.getNow()),c(e.list,t))})};p(),t.getChilds=function(e,o,a){if("seconds"==a?(t.properties=[],t.productCategory=[],t.secondCategory=[],t.productsChild=[]):"secondChild"==a&&(t.properties=[],t.productsChild=[]),void 0!==e){d(e,a);var s=parseInt(e);t[o]=t[a][s]}},t.reback=function(){history.go(-1)},t.prop=[],t.add=function(){var e=t.init.productid;t.init.productidChild&&t.init.productidChild.id&&(e=t.init.productidChild),t.product.category_id=e.id;var a=[];angular.forEach(t.init.spec,function(e,o){angular.forEach(t.properties,function(t){parseInt(t.id)==parseInt(o)&&(t.val=e,a.push(t))})}),t.product.spec=a,o.getdata("/sku/save","POST",function(t){0===parseInt(t.status)?(l.tips({bodyText:"保存成功！",close:function(){}}),o.redirect("/goods")):l.tips({bodyText:"保存失败，请稍后重试。",close:function(){}})},t.product)}}]),angular.module("hop").controller("GoodsAddCtrl",["$scope","req","$location","$cookieStore","dialog","daChuLocal","daChuTimer",function(t,e,o,a,s,l,n){function i(e,o){t.topCategory=e.top,t.seconds=e.second,t.thirdChild=e.third_child,t.secondChild=e.second_child,o&&(angular.forEach(t.topCategory,function(e){parseInt(e.id)===parseInt(o[0])&&(t.init.category_id=e)}),t.init.category_id&&(t.secondCategory=t.seconds[t.init.category_id.id],angular.forEach(t.secondCategory,function(e){parseInt(e.id)===parseInt(o[1])&&(t.init.childid=e)})),t.init.childid&&(t.productCategory=t.secondChild[t.init.childid.id],angular.forEach(t.productCategory,function(e){parseInt(e.id)===parseInt(o[2])&&(t.init.productid=e)})))}t.productsChild=[],t.title="添加货物",t.product={title:"",id:0,category_id:"",spec:[]},t.init={category_id:"",childid:"",productid:"",selfProduct:"",spec:[]},t.buttons=[{name:"保存",type:"submit",clk:"add",cls:"btn-success"},{name:"返回",type:"reset",clk:"reback",cls:"btn-default"}];var c=function(o,a){e.getdata("property/cate_prop_list","POST",function(e){0===parseInt(e.status)?t.properties=e.list:"secondChild"==a?c(t.init.category_id.id,"seconds"):"thirdChild"==a&&c(t.init.childid.id,"secondChild")},{category_id:o})},r=function(t){var o=l.get("cateList"),a=l.get("cateListTime");o&&n.compare(a)?i(o,t):e.getdata("category/lists","GET",function(e){-1!=parseInt(e.status)&&e.list.top.length>0&&(l.set("cateList",e.list),l.set("cateListTime",n.getNow()),i(e.list,t))})};r(),t.getChilds=function(e,o,a){if("seconds"==a?(t.properties=[],t.productCategory=[],t.secondCategory=[],t.productsChild=[]):"secondChild"==a&&(t.properties=[],t.productsChild=[]),void 0!==e){c(e,a);var s=parseInt(e);t[o]=t[a][s]}},t.reback=function(){history.go(-1)},t.prop=[],t.add=function(){var o=t.init.productid;t.init.productidChild&&t.init.productidChild.id&&(o=t.init.productidChild),t.product.category_id=o.id;var a=[];angular.forEach(t.init.spec,function(e,o){angular.forEach(t.properties,function(t){parseInt(t.id)==parseInt(o)&&(t.val=e,a.push(t))})}),t.product.spec=a,e.getdata("/sku/save","POST",function(t){0===parseInt(t.status)?(s.tips({bodyText:"保存成功！",close:function(){}}),e.redirect("/goods")):s.tips({bodyText:"保存失败，请稍后重试。",close:function(){}})},t.product)}}]),angular.module("hop").controller("CateMapAddCtrl",["$scope","req","dialog",function(t,e,o){t.title="前端分类映射";var a=function(){t.newTop=[],t.topIds=[],angular.forEach(t.initTop,function(e){t.newTop.push(e),t.topIds.push(e.id)}),angular.forEach(t.initSecond,function(e){t.newTop.push(e)})};t.cateInfo={weight:0,name:""},t.paginationConf={currentPage:1,itemsPerPage:15};var s=function(){e.getdata("category/map","POST",function(e){t.initTop=e.list.top,t.initSecond=e.list.second,t.initTopChild=e.list.top_child,t.initSecondChild=e.list.second_child,t.locations=e.location,t.cateInfo.location=e.location[0],t.sites=e.sites,t.cateInfo.site=e.sites[0],a()},{currentPage:t.paginationConf.currentPage,itemsPerPage:t.paginationConf.itemsPerPage})};t.$watch("paginationConf.currentPage + paginationConf.itemsPerPage",s),t.getSecond=function(){if(t.cateInfo.childCate=[],void 0!=t.cateInfo.category){var e=t.cateInfo.category.id,o=[];angular.forEach(t.topIds,function(a){a==e&&(o=t.initTopChild)}),t.newSecond=o.length>0?t.initTopChild:t.initSecondChild,t.cateInfo.name=t.cateInfo.category.name}},t.getThird=function(){t.cateInfo.name=void 0!=t.cateInfo.childCate?t.cateInfo.childCate.name:t.cateInfo.category.name},t.cateAdd=function(){var a,s,l=0;void 0==t.cateInfo.childCate?(a=t.cateInfo.category.id,s=t.cateInfo.category.name):(a=t.cateInfo.childCate.id,s=t.cateInfo.childCate.name,l=t.cateInfo.category.id),void 0===a&&(a=l,l=0,s=t.cateInfo.category.name);var n={siteId:t.cateInfo.site.id,weight:t.cateInfo.weight,locationId:t.cateInfo.location.id,name:t.cateInfo.name,initName:s,initUpid:l,initId:a};e.getdata("catemap/create","POST",function(t){o.tips({bodyText:t.msg})},n)},t.reback=function(){e.redirect("/category/map")}}]),angular.module("hop").controller("CateMapCtrl",["$scope","req","dialog",function(t,e,o){t.title="映射列表",t.key="",t.localId="";var a=function(){t.list=[],t.suggest=[],e.getdata("catemap/lists","POST",function(e){t.list=e.list,t.locations=e.location,t.localId?angular.forEach(t.locations,function(e){e.id==t.localId&&(t.locate=e)}):(t.locate=e.location[0],t.localId=e.location[0].id),t.suggest=e.list,t.reBackbtn=!1},{currentPage:t.paginationConf.currentPage,itemsPerPage:t.paginationConf.itemsPerPage,locationId:t.localId,searchVal:t.key})};t.search=function(e){1===parseInt(e)&&(t.key=""),t.localId=t.locate.id,a()},t.paginationConf={currentPage:1,itemsPerPage:15},t.$watch("paginationConf.currentPage + paginationConf.itemsPerPage",a),t.setStatus=function(a,s){t.list[a].status=s;var l=t.list[a].id;e.getdata("catemap/set_status","POST",function(t){o.tips({bodyText:t.msg})},{id:l,status:s})}}]),angular.module("hop").controller("CategoryEditCtrl",["$scope","req","$cookieStore","dialog","daChuLocal","$stateParams",function(t,e,o,a,s,l){function n(e){t.ups=e.top,t.second=e.second,t.secondChild=e.second_child,t.init.path.length>1&&(angular.forEach(t.ups,function(e){parseInt(e.id)===parseInt(t.init.path[0])&&(t.category=e)}),t.init.path.length>2&&void 0!==t.init.path[1]&&(t.childCates=t.second[t.category.id],angular.forEach(t.childCates,function(e){parseInt(e.id)===parseInt(t.init.path[1])&&(t.childCate=e)})),t.init.path.length>3&&void 0!==t.init.path[2]&&(t.thirdCates=t.secondChild[t.childCate.id],angular.forEach(t.thirdCates,function(e){parseInt(e.id)===parseInt(t.init.path[2])&&(t.thirdCate=e)})))}t.title="编辑分类",t.cateInfo={name:"",upid:0,edit_id:0,weight:0},t.init={path:[]},t.categoryInit=function(){e.getdata("category/lists","GET",function(t){n(t.list)})},t.getChild=function(){if(void 0!=t.category){var e=t.category.id;t.childCates=t.second[e]}},t.getThird=function(){if(void 0!=t.childCate){var e=t.childCate.id;t.thirdCates=t.secondChild[e]}t.thirdCate=void 0},e.getdata("/category/get_info","POST",function(e){if(-1!==parseInt(e.status)){t.cateInfo.name=e.info.name,t.cateInfo.weight=parseInt(e.info.weight),t.cateInfo.upid=e.info.upid,t.path=e.info.path,t.cateInfo.edit_id=l.id;var o=t.path.split(".");o.pop(),o.shift(),t.init.path=o,t.categoryInit()}},{id:l.id}),t.reback=function(){e.redirect("/category")},t.cateAdd=function(){void 0!=t.category&&(t.cateInfo.upid=t.category.id),void 0!=t.childCate&&(t.cateInfo.upid=t.childCate.id),void 0!=t.thirdCate&&(t.cateInfo.upid=t.thirdCate.id),e.getdata("category/update_category","POST",function(e){-1!==parseInt(e.status)?(a.tips({bodyText:e.msg}),t.reback()):a.tips({bodyText:e.msg})},t.cateInfo)}}]),angular.module("hop").controller("CategoryAddCtrl",["$scope","req","$cookieStore","dialog",function(t,e,o,a){function s(e){t.ups=e.top,t.second=e.second,t.secondChild=e.second_child}t.cateInfo={name:"",upid:0,id:0,weight:0},t.title="添加分类",t.categoryInit=function(){e.getdata("category/lists","GET",function(t){s(t.list)})},t.categoryInit(),t.getChild=function(){if(t.childCates=[],t.thirdCates=[],void 0!=t.category){var e=t.category.id;void 0!==t.second[e]&&(t.childCates=t.second[e])}},t.getThird=function(){if(t.thirdCates=[],void 0!=t.childCate){var e=t.childCate.id;void 0!==t.secondChild&&(t.thirdCates=t.secondChild[e])}},t.cateAdd=function(){void 0!=t.category&&(t.cateInfo.upid=t.category.id),void 0!=t.childCate&&(t.cateInfo.upid=t.childCate.id),void 0!=t.thirdCate&&(t.cateInfo.upid=t.thirdCate.id),e.getdata("category/save","POST",function(e){-1!==parseInt(e.status)?(a.tips({bodyText:"添加分类成功"}),t.reback()):a.tips({bodyText:e.msg})},t.cateInfo)},t.reback=function(){e.redirect("/category")}}]),angular.module("hop").controller("CategoryCtrl",["$scope","dialog","req","daChuLocal","appConfigure",function(t,e,o,a,s){function l(){t.list=[],o.getdata("category/get_category_list","POST",function(e){angular.forEach(e.list,function(e){t.list.push(e)}),t.reBackbtn=!1})}function n(e){o.getdata("category/get_category_list","POST",function(e){0===e.status&&e.list.length>0?(t.list=[],angular.forEach(e.list,function(e){t.list.push(e)}),t.showRebackbtn=!0):alert("没有下级节点了")},{upid:e})}t.title="分类列表",t.upId=0,t.site_url=s.url,l(),t.edit=function(e){o.redirect("/category/edit/"+t.list[e].id)},a.set("his_path",[]),t.getChild=function(e){var o=t.list[e].id,s=a.get("his_path");s.push(t.list[e].id),a.set("his_path",s),n(o)},t.getParent=function(){var t=a.get("his_path");t.length>=1&&(t.pop(),a.set("his_path",t));var e=t.length>=1?t[t.length-1]:0;n(e)},t.reback=function(){var e=a.get("cateListLastId"),o=e.split("_");if(o.length>2){o.pop();var s=o.pop();n(s)}else t.showRebackbtn=!1,l()},t.setStatus=function(a,s){var l=t.list[a].id;e.tips(0===parseInt(s)?{headerText:"请谨慎操作",bodyText:"确定要禁用"+t.list[a].name+"?",actionText:"确定",ok:function(){o.getdata("category/del","POST",function(o){0===parseInt(o.status)?(t.list[a].status=0,e.tips({bodyText:o.msg})):e.tips({bodyText:"禁用失败，请联系管理人员"})},{id:l})}}:{headerText:"启用被禁用的分类",bodyText:"确定要启用"+t.list[a].name+"?",actionText:"确定",ok:function(){o.getdata("category/reuse","POST",function(o){0===parseInt(o.status)?(t.list[a].status=1,e.tips({bodyText:o.msg})):e.tips({bodyText:"启用失败，请联系管理员"})},{id:l})}})},t.back=function(){o.redirect("/category")},t.paginationConf={currentPage:1,itemsPerPage:15},t.$watch("paginationConf.currentPage + paginationConf.itemsPerPage",function(){})}]),angular.module("hop").controller("CateMapEditCtrl",["$scope","$stateParams","req","dialog",function(t,e,o,a){t.title="编辑映射分类",t.cateInfo={weight:0,name:""};var s=function(){o.getdata("catemap/info","POST",function(e){t.initTop=e.list.top,t.initSecond=e.list.second,t.initTopChild=e.list.top_child,t.initSecondChild=e.list.second_child,t.sites=e.sites,t.locations=e.location,t.info=e.info,l()},{id:e.id})};s();var l=function(){t.newTop=[],t.topIds=[],angular.forEach(t.initTop,function(e){t.newTop.push(e),t.topIds.push(e.id)}),angular.forEach(t.initSecond,function(e){t.newTop.push(e)}),n()},n=function(){t.cateInfo={weight:parseInt(t.info.weight),name:t.info.name,site:null,category:null,childCate:null},angular.forEach(t.sites,function(e){parseInt(e.id)==parseInt(t.info.site_id)&&(t.cateInfo.site=e)}),angular.forEach(t.locations,function(e){e.id==t.info.location_id&&(t.cateInfo.location=e)});var e=parseInt(t.info.origin_upid),o=parseInt(t.info.origin_id);e?angular.forEach(t.newTop,function(o){e===parseInt(o.id)&&(t.cateInfo.category=o)}):angular.forEach(t.newTop,function(e){o===parseInt(e.id)&&(t.cateInfo.category=e)}),t.getSecond(),e&&angular.forEach(t.newSecond,function(e){o==parseInt(e.id)&&(t.cateInfo.childCate=e)})};t.getSecond=function(){if(t.cateInfo.childCate=[],void 0!=t.cateInfo.category){var e=t.cateInfo.category.id,o=[];angular.forEach(t.topIds,function(a){a==e&&(o=t.initTopChild)}),t.newSecond=o.length>0?t.initTopChild:t.initSecondChild}},t.getThird=function(){},t.cateAdd=function(){var s,l,n=0;void 0==t.cateInfo.childCate?(s=t.cateInfo.category.id,l=t.cateInfo.category.name):(s=t.cateInfo.childCate.id,l=t.cateInfo.childCate.name,n=t.cateInfo.category.id),void 0===s&&(s=n,n=0,l=t.cateInfo.category.name);var i={siteId:t.cateInfo.site.id,weight:t.cateInfo.weight,name:t.cateInfo.name,initName:l,locationId:t.cateInfo.location.id,initUpid:n,initId:s,id:e.id};o.getdata("catemap/save","POST",function(t){a.tips({bodyText:t.msg})},i)},t.reback=function(){o.redirect("/category/map")}}]),angular.module("hop").controller("TopCtrl",["$scope","$cookieStore","$location","HopAuth",function(t,e,o,a){if(t.currentUrl=o.$$url.split("_")[0],t.status={isopen:!1},a.auth(),t.isLogin=a.isLogin,t.title="商品信息管理系统",t.isLogin){var s=e.get("type");100===parseInt(s)?t.userInfo="超级管理员":10==parseInt(s)?t.userInfo="运营":11===parseInt(s)?t.userInfo="财务":103===parseInt(s)&&(t.userInfo="仓管"),t.toggleDropdown=function(e){e.preventDefault(),e.stopPropagation(),t.status.isopen=!t.status.isopen},t.logout=function(){a.logout()},t.changePwd=function(){a.pwd()}}else o.path("/login")}]),angular.module("hop").controller("SidebarCtrl",["$scope","$location","$cookieStore",function(t,e,o){t.selectedItem=null,t.changeUrl=function(e){t.selectedItem=e};var a=(parseInt(o.get("type")),{name:"分类管理",val:[{name:"分类列表",val:"home.category"},{name:"前端分类映射",val:"home.cateMap"}]}),s={name:"货物管理",val:[{name:"货物列表",val:"home.goods"}]},l={name:"规格管理",val:[{name:"规格列表",val:"home.property"}]};t.urls=[a,l,s]}]),angular.module("hop").controller("NavbarCtrl",["$scope","$cookieStore","$location",function(t,e,o){t.currentUrl=o.$$url.split("_")[0],t.status={isopen:!1},t.title="PMS"}]),angular.module("hop").factory("daChuTimer",function(){var t={getNow:function(){return parseInt((new Date).getTime()/1e3)},cacheTime:30};return{getNow:t.getNow,setCacheTime:function(e){t.cacheTime=parseInt(e)},compare:function(e){var o=this.getNow();return parseInt(e)+t.cacheTime>o?!0:!1}}}),angular.module("hop").factory("req",["$http","$location","$cookieStore","appConfigure",function(t,e,o,a){var s=(e.$$host,a.url);return{getdata:function(e,a,l,n){void 0==a&&(a="POST");var i=this;t({url:s+"/"+e+"?r="+Math.random(),method:a,cache:!1,withCredentials:!0,headers:{"Content-Type":"application/x-www-form-urlencoded"},data:n}).success(function(t){t&&-100===t.status&&(o.remove("id"),o.remove("type"),i.redirect("/user/login")),l(t)})},init:e,refer:"/",redirect:function(t,o){void 0!=o?this.refer=o:""==t&&e.path(this.refer),e.path(t)}}}]),angular.module("hop").factory("pagination",function(){var t={page:1,isProcessing:!1,processingText:"努力加载中...",isDone:!1,more:"点击加载更多",callback:null};return t.nextPage=function(){t.isProcessing||t.isDone||(t.more="正在加载更多...",t.isProcessing=!0,t.page++,t.callback&&t.callback(function(e){e?(t.isDone=!0,t.more="没有更多了"):t.more="点击加载更多",t.isProcessing=!1}))},t.init=function(e){t.page=1,t.isProcessing=!1,t.isDone=!1,t.more="点击加载更多",t.callback=e},t}),angular.module("hop").factory("daChuLocal",function(){var t={get:function(t){return JSON.parse(localStorage.getItem(t))},set:function(t,e){localStorage.setItem(t,JSON.stringify(e))}};return t}),angular.module("hop").factory("dialog",["$modal",function(t){var e=function(e,o){var a={headerText:"提示信息",bodyText:"设置成功",closeText:"关闭"},s={templateUrl:"myModalContent.html"};angular.extend(s,o),angular.extend(a,e);t.open({templateUrl:s.templateUrl,controller:"ModalInstanceCtrl",resolve:{items:function(){return a}}})};return{tips:e}}]).controller("ModalInstanceCtrl",["$scope","$modalInstance","items",function(t,e,o){t.items=o,t.selected={item:t.items[0]},t.ok=function(){e.close(t.selected.item)},t.cancel=function(){e.dismiss("cancel")}}]),angular.module("hop").factory("HopPermit",["req",function(){var t=[100,10,11,12,103],e={menus:{},checkType:function(e){return-1!==t.indexOf(e)?!0:!1}};return{getPermit:function(t){return e.checkType(t)?!0:!1}}}]).factory("HopAuth",["HopPermit","$cookieStore","req","dialog",function(t,e,o,a){var s={isLogin:!1,getAuth:function(){var o=parseInt(e.get("type"));return t.getPermit(o)?(this.isLogin=!0,!0):(this.isLogin=!1,!1)},changePwd:function(t){var s=this;s.isLogin&&a.tips({headerText:"修改密码",actionText:"修改密码",ok:function(l){return l.newRePassword!=l.newPassword?!1:(angular.isDefined(t)||(t=e.get("id")),o.getdata("user/update_password","POST",function(t){0===parseInt(t.status)?(a.tips({bodyText:t.msg}),s.isLogin=!1,e.remove("type"),e.remove("id"),o.redirect("/user/login")):a.tips({bodyText:t.msg})},l),!1)}},{templateUrl:"password.html"})}};return{isLogin:s.isLogin,auth:s.getAuth,info:{id:e.get("id"),type:e.get("type")},logout:function(){o.getdata("user/logout","GET",function(){e.remove("type"),e.remove("id"),o.redirect("/login")})},pwd:s.changePwd}}]),angular.module("dachu.widget",[]).directive("dachuPagination",[function(){return{restrict:"EA",template:'<div class="page-list"><ul class="pagination" ng-show="conf.totalItems > 0"><li ng-class="{disabled: conf.currentPage == 1}" ng-click="prevPage()"><span>&laquo;</span></li><li ng-repeat="item in pageList track by $index" ng-class="{active: item == conf.currentPage, separate: item == \'...\'}" ng-click="changeCurrentPage(item)"><span>{{ item }}</span></li><li ng-class="{disabled: conf.currentPage == conf.numberOfPages}" ng-click="nextPage()"><span>&raquo;</span></li></ul><div class="page-total" ng-show="conf.totalItems > 0">第<input type="text" ng-model="jumpPageNum"  ng-keyup="jumpToPage($event)"/>页 每页<select ng-model="conf.itemsPerPage" ng-options="option for option in conf.perPageOptions " ng-change="changeItemsPerPage()"></select>/共<strong>{{ conf.totalItems }}</strong>条</div><div class="no-items" ng-show="conf.totalItems <= 0">暂无数据</div></div>',replace:!0,scope:{conf:"="},link:function(t){function e(){t.conf.currentPage=parseInt(t.conf.currentPage)?parseInt(t.conf.currentPage):1,t.conf.totalItems=parseInt(t.conf.totalItems),t.conf.rememberPerPage?(parseInt(localStorage[t.conf.rememberPerPage])||(localStorage[t.conf.rememberPerPage]=parseInt(t.conf.itemsPerPage)?parseInt(t.conf.itemsPerPage):15),t.conf.itemsPerPage=parseInt(localStorage[t.conf.rememberPerPage])):t.conf.itemsPerPage=parseInt(t.conf.itemsPerPage)?parseInt(t.conf.itemsPerPage):15,t.conf.numberOfPages=Math.ceil(t.conf.totalItems/t.conf.itemsPerPage),t.conf.currentPage<1&&(t.conf.currentPage=1),t.conf.currentPage>t.conf.numberOfPages&&(t.conf.currentPage=t.conf.numberOfPages),t.jumpPageNum=t.conf.currentPage;for(var e,o=t.conf.perPageOptions.length,a=0;o>a;a++)parseInt(t.conf.perPageOptions[a])==parseInt(t.conf.itemsPerPage)&&(e=!0);if(e||t.conf.perPageOptions.push(t.conf.itemsPerPage),t.conf.perPageOptions.sort(function(t,e){return t-e}),t.pageList=[],t.conf.numberOfPages<=t.conf.pagesLength)for(a=1;a<=t.conf.numberOfPages;a++)t.pageList.push(a);else{var s=(t.conf.pagesLength-1)/2;if(t.conf.currentPage<=s){for(a=1;s+1>=a;a++)t.pageList.push(a);t.pageList.push("..."),t.pageList.push(t.conf.numberOfPages)}else if(t.conf.currentPage>t.conf.numberOfPages-s){for(t.pageList.push(1),t.pageList.push("..."),a=s+1;a>=1;a--)t.pageList.push(t.conf.numberOfPages-a);t.pageList.push(t.conf.numberOfPages)}else{for(t.pageList.push(1),t.pageList.push("..."),a=Math.ceil(s/2);a>=1;a--)t.pageList.push(t.conf.currentPage-a);for(t.pageList.push(t.conf.currentPage),a=1;s/2>=a;a++)t.pageList.push(t.conf.currentPage+a);t.pageList.push("..."),t.pageList.push(t.conf.numberOfPages)}}t.conf.onChange&&t.conf.onChange(),t.$parent.conf=t.conf}t.changeCurrentPage=function(e){"..."!==e&&(t.conf.currentPage=e)},t.conf.pagesLength=parseInt(t.conf.pagesLength)?parseInt(t.conf.pagesLength):9,t.conf.pagesLength%2===0&&(t.conf.pagesLength=t.conf.pagesLength-1),t.conf.perPageOptions||(t.conf.perPageOptions=[10,15,20,30,50]),t.prevPage=function(){t.conf.currentPage>1&&(t.conf.currentPage-=1)
},t.nextPage=function(){t.conf.currentPage<t.conf.numberOfPages&&(t.conf.currentPage+=1)},t.jumpToPage=function(){t.jumpPageNum=t.jumpPageNum.replace(/[^0-9]/g,""),""!==t.jumpPageNum&&(t.conf.currentPage=t.jumpPageNum)},t.changeItemsPerPage=function(){t.conf.rememberPerPage&&localStorage.removeItem(t.conf.rememberPerPage)},t.$watch(function(){var e=t.conf.currentPage+" "+t.conf.totalItems+" ";return e+=t.conf.rememberPerPage&&localStorage[t.conf.rememberPerPage]?localStorage[t.conf.rememberPerPage]:t.conf.itemsPerPage},e)}}}]),angular.module("hop").config(["$stateProvider","$urlRouterProvider","$locationProvider",function(t,e,o){var a="app/modules";t.state("home",{url:"/",templateUrl:a+"/home/home.html",controller:"HomeCtrl"}).state("home.propertyEdit",{url:"property/{id:[0-9]{1,}}",templateUrl:a+"/property/add.html",controller:"PropertyEditCtrl"}).state("home.propertyAdd",{url:"property/add",templateUrl:a+"/property/add.html",controller:"PropertyAddCtrl"}).state("home.categoryEdit",{url:"category/{id:[0-9]{1,}}",templateUrl:a+"/category/add.html",controller:"CategoryEditCtrl"}).state("home.category",{url:"category",templateUrl:a+"/category/list.html",controller:"CategoryCtrl"}).state("home.editMap",{url:"map/{id:[0-9]{1,}}",templateUrl:a+"/category/map.html",controller:"CateMapEditCtrl"}).state("home.cateMapAdd",{url:"category/map_add",templateUrl:a+"/category/map.html",controller:"CateMapAddCtrl"}).state("home.cateMap",{url:"category/map",templateUrl:a+"/category/map_list.html",controller:"CateMapCtrl"}).state("home.categoryAdd",{url:"category/add",templateUrl:a+"/category/add.html",controller:"CategoryAddCtrl"}).state("home.property",{url:"property",templateUrl:a+"/property/list.html",controller:"PropertyCtrl"}).state("home.goods",{url:"goods",templateUrl:a+"/goods/list.html",controller:"GoodsCtrl"}).state("home.goodsAdd",{url:"goods/add",templateUrl:a+"/goods/add.html",controller:"GoodsAddCtrl"}).state("home.GoodsEdit",{url:"product/{productId:[0-9]{1,}}",templateUrl:a+"/goods/add.html",controller:"GoodsEditCtrl"}).state("login",{url:"/login",templateUrl:a+"/user/login.html",controller:"LoginCtrl"}),e.otherwise("/"),o.html5Mode(!0)}]),angular.module("hop").provider("appConfigure",{$get:["$location",function(t){var e=t.$$host;return e.indexOf("dachuwang")<0&&(e="pms.dachuwang.net"),{url:"http://api."+e}}]}),angular.module("hop").run(["$templateCache",function(t){t.put("components/navbar/navbar.html",'<nav class="navbar navbar-inverse navbar-fixed-top" ng-controller="TopCtrl"><script type="text/ng-template" id="myModalContent.html"><div class="modal-header"> <h3 class="modal-title">{{items.headerText}}</h3> </div> <div class="modal-body"> <h2>{{items.bodyText}}</h2> </div> <div class="modal-footer"> <button class="btn btn-primary" ng-click="items.ok();cancel();" ng-if="items.actionText"> {{items.actionText}} </button> <button class="btn btn-warning" ng-click="cancel()">{{items.closeText}}</button> </div></script><script type="text/ng-template" id="password.html"><div class="modal-header"> <h3 class="modal-title">{{items.headerText}}</h3> </div> <div class="modal-body"> <form class="row block block-col form-horizontal" role="form" name="passwordForm"> <div class="form-group col-xs-12"> <label for="password" class="col-sm-2 control-label"> <h5> <b>旧密码</b> </h5> </label> <div class="col-sm-10"> <input type="password" required class="input-lg form-control" ng-model="reg.password" id="password" placeholder="请输入您的旧密码" ng-minlength="6" name="oldpassword"> <div class="col-xs-12 block-col label label-danger" ng-show="passwordForm.oldpassword.$dirty && passwordForm.oldpassword.$invalid"> <small ng-show="passwordForm.oldpassword.$error.minlength">旧密码至少6位</small> <small ng-show="passwordForm.oldpassword.$error.required">旧密码必填</small> </div> </div> </div> <div class="form-group col-xs-12"> <label for="newpassword" class="col-sm-2 control-label"> <h5> <b>新密码</b> </h5> </label> <div class="col-sm-10"> <input type="password" required class="input-lg form-control" ng-model="reg.newPassword" id="newPassword" placeholder="请输入您的新密码" ng-minlength="6" name="password"> <div class="col-xs-12 block-col label label-danger" ng-show="passwordForm.password.$dirty && passwordForm.password.$invalid"> <small ng-show="passwordForm.password.$error.minlength">密码至少6位</small> <small ng-show="passwordForm.password.$error.required">密码必填</small> </div> </div> </div> <div class="form-group col-xs-12"> <label for="newpassword" class="col-sm-2 control-label"> <h5> <b>输入新密码</b> </h5> </label> <div class="col-sm-10"> <input type="password" required class="input-lg form-control" ng-model="reg.newRePassword" id="newRePassword" ng-minlength="6" placeholder="请再次输入您的新密码" name="repassword"> <div class="col-xs-12 block-col label label-danger" ng-show="passwordForm.repassword.$dirty && passwordForm.repassword.$invalid"> <small ng-show="passwordForm.repassword.$error.minlength">确认密码至少6位</small> <small ng-show="passwordForm.repassword.$error.required">确认密码必填</small> </div> <div class="col-xs-12 block-col label label-danger" ng-show="passwordForm.repassword.$dirty && passwordForm.repassword.$valid && reg.newRePassword != reg.newPassword"> <small>两次密码不一致</small> </div> </div> </div> </form> </div> <div class="modal-footer"> <button class="btn btn-primary" ng-click="items.ok(reg);cancel()" ng-if="items.actionText"> {{items.actionText}} </button> <button class="btn btn-warning" ng-click="cancel()">{{items.closeText}}</button> </div></script><div class="container-fluid" ng-controller="NavbarCtrl"><div class="navbar-header" style="width:100%;"><a style="padding-right:0;" href="javascript:history.back()" class="glyphicon navbar-brand glyphicon-chevron-left"></a> <a href="/" class="navbar-brand">{{title}}</a><div ng-if="isLogin"><ul class="nav navbar-nav navbar-right"><li class="dropdown" dropdown=""><a href="/" class="dropdown-toggle" dropdown-toggle="">{{userInfo}}<span class="caret"></span></a><ul class="dropdown-menu"><li ng-click="changePwd()"><a href="#">修改密码</a></li><li ng-click="logout()"><a href="#">登出</a></li><div class="mobile_menu" ng-controller="SidebarCtrl"><ul ng-repeat="url in urls"><li ng-repeat="item in url.val"><a ng-href="{{item.val}}" ng-class="{\'active\': item.val==currentUrl}" class="nav-li-child">{{item.name}}</a></li></ul></div></ul></li></ul></div></div></div></nav><div class="nav-mt"></div>'),t.put("components/navbar/navsidebar.html",'<div class="col-xs-2 sidebar" ng-controller="SidebarCtrl"><ul class="nav nav-sidebar"><li role="presentation" ng-click="changeUrl(item.val)"><a ng-href="/" ng-class="{\'active\': currentUrl==\'/\'}" class="nav-li">首页</a></li></ul><ul class="nav nav-sidebar" ng-repeat="url in urls"><li><h4 class="nav-li">{{url.name}}</h4></li><li ng-repeat="item in url.val" ng-click="changeUrl(item.val)"><a ui-sref="{{item.val}}" ng-class="{\'active\': item.val===selectedItem}" class="nav-li-child">{{item.name}}</a></li></ul></div>'),t.put("app/modules/category/add.html",'<div class="col-xs-offset-2"><div class="bs-callout bs-callout-danger"><h5>{{title}}</h5></div><form class="row block" role="form" ng-submit="cateAdd()"><div class="form-group col-xs-12"><label for="type" class="col-sm-2 control-label">一级分类</label><div class="col-sm-10"><select ng-model="category" ng-change="getChild()" ng-options="str.name for str in ups" class="input-lg form-control"><option value="">--选择分类类型--</option></select></div></div><div class="form-group col-xs-12"><label for="type" class="col-sm-2 control-label">二级分类</label><div class="col-sm-10"><select ng-model="childCate" ng-options="str.name for str in childCates" ng-change="getThird()" class="input-lg form-control"><option value="">--选择分类类型--</option></select></div></div><div class="form-group col-xs-12"><label for="type" class="col-sm-2 control-label">三级分类</label><div class="col-sm-10"><select ng-model="thirdCate" ng-options="str.name for str in thirdCates" class="input-lg form-control"><option value="">--选择分类类型--</option></select></div></div><div class="form-group col-xs-12"><label for="tel" class="col-sm-2 control-label">品类名称</label><div class="col-sm-10"><input type="text" required="" class="input-lg form-control" ng-model="cateInfo.name" name="catename" placeholder="请输入品类名称"></div></div><div class="form-group col-xs-12"><label for="weight" class="col-sm-2 control-label">权重[越大越靠前]</label><div class="col-sm-10"><input type="number" required="" class="input-lg form-control" ng-model="cateInfo.weight" name="weight" placeholder="请输入权重值"></div></div><div class="form-group col-xs-12"><div class="col-sm-offset-2 col-sm-10"><button type="submit" class="btn btn-success col-xs-12 btn-lg">保存</button></div></div><div class="form-group col-xs-12"><div class="col-sm-offset-2 col-sm-10"><button type="button" ng-click="reback()" class="btn btn-default col-xs-12 btn-lg">取消</button></div></div></form></div>'),t.put("app/modules/category/edit.html",'<div class="container-fluid"><script type="text/ng-template" id="myModalContent.html"><div class="modal-header"> <h3 class="modal-title">{{items.headerText}}</h3> </div> <div class="modal-body"> <h2 class="text-center">{{items.bodyText}}</h2> </div> <div class="modal-footer"> <button class="btn btn-primary" ng-click="items.ok()" ng-if="items.actionText"> {{items.actionText}} </button> <button class="btn btn-warning" ng-click="items.close();cancel()">{{items.closeText}}</button> </div></script><div ng-include="\'components/subnavbar/subnavbar.html\'" ng-init="pageTitle=\'编辑分类\'"></div><form class="row block block-col form-horizontal" role="form" ng-submit="cateSave()" ng-controller="CategoryEditCtrl"><div class="form-group col-xs-12"><label for="type" class="col-sm-2 control-label">一级分类</label><div class="col-sm-10"><select ng-model="category" ng-change="getChild()" ng-options="str.name for str in ups" class="input-lg form-control"><option value="">--选择分类类型--</option></select></div></div><div class="form-group col-xs-12"><label for="type" class="col-sm-2 control-label">二级分类</label><div class="col-sm-10"><select ng-model="childCate" ng-options="str.name for str in childCates" ng-change="getThird()" class="input-lg form-control"><option value="">--选择分类类型--</option></select></div></div><div class="form-group col-xs-12"><label for="type" class="col-sm-2 control-label">三级分类</label><div class="col-sm-10"><select ng-model="thirdCate" ng-options="str.name for str in thirdCates" class="input-lg form-control"><option value="">--选择分类类型--</option></select></div></div><div class="form-group col-xs-12"><label for="tel" class="col-sm-2 control-label">品类名称</label><div class="col-sm-10"><input type="text" required="" class="input-lg form-control" ng-model="cateInfo.name" name="catename" placeholder="请输入品类名称"></div></div><div class="form-group col-xs-12"><label for="weight" class="col-sm-2 control-label">权重【从大到小排序】</label><div class="col-sm-10"><input type="number" required="" class="input-lg form-control" ng-model="cateInfo.weight" name="weight" placeholder="请输入权重值"></div></div><div class="form-group col-xs-12"><button type="submit" class="btn btn-success col-xs-12 btn-lg">保存</button></div><div class="form-group col-xs-12"><button type="button" ng-click="reback()" class="btn btn-default col-xs-12 btn-lg">取消</button></div></form></div><div ng-include="\'components/footer/footer.html\'"></div>'),t.put("app/modules/category/list.html",'<div class="col-xs-offset-2"><div class="bs-callout bs-callout-danger"><h5>{{title}}</h5></div><div class="bs-callout"><div class="mt-10 text-left"><div class="form-group row"><div class="col-xs-4"><a class="btn btn-success btn-lg btn-block" ui-sref="home.categoryAdd">添加分类</a></div><div class="col-xs-4"><a class="btn btn-default btn-lg btn-block" href="{{site_url}}/temp_export/get_category">导出分类</a></div><div class="col-xs-4"><a class="btn btn-default btn-lg btn-block" href="{{site_url}}/temp_export/get_template">导出产品模板</a></div></div></div></div><div class="table-responsive" style="margin-top:10px;"><table class="table table-bordered table-striped table-hover"><colgroup><col class="col-xs-1"><col class="col-xs-1"><col class="col-xs-3"><col class="col-xs-2"><col class="col-xs-2"><col class="col-xs-3"></colgroup><thead><tr><td class="text-center"><h5>编号</h5></td><td class="text-center"><h5>分类权重</h5></td><td class="text-center"><h5>分类名</h5></td><td class="text-center"><h5>分类状态</h5></td><td class="text-center"><h5>上次更新时间</h5></td><td class="text-center"><h5>操作</h5></td></tr></thead><tbody ng-if="list.length===0"><tr><td colspan="6" class="text-center"><h5>暂无数据</h5></td></tr></tbody><tbody><tr ng-repeat="item in list"><td class="text-center"><h5>{{item.id}}</h5></td><td class="text-center"><h5>{{item.weight}}</h5></td><td class="text-center"><h5><a class="btn btn-info btn_mb5 btn-sm" ng-if="item.upid > 0" ng-click="getParent($index)">返回上级</a> {{item.name}} <a class="btn btn-info btn_mb5 btn-sm" ng-click="getChild($index)">查看下级&nbsp;<span class="glyphicon glyphicon-chevron-down"></span></a></h5></td><td class="text-center"><h5 ng-if="item.status == 1">有效</h5><h5 ng-if="item.status == 0">无效</h5></td><td class="text-center"><h5>{{item.updated_time}}</h5></td><td class="text-center"><h5><a class="btn btn-primary btn_mb5 btn-sm" ui-sref="home.categoryEdit({id:item.id})">编辑分类</a> <a class="btn btn-danger btn-sm btn_mb5" ng-click="setStatus($index, 0)" ng-show="item.status == 1">禁用分类</a> <a class="btn btn-success btn-sm btn_mb5" ng-click="setStatus($index, 1)" ng-show="item.status == 0">启用分类</a></h5></td></tr></tbody></table></div><nav><dachu-pagination conf="paginationConf"></dachu-pagination></nav></div>'),t.put("app/modules/category/map.html",'<div class="col-xs-offset-2"><div class="bs-callout bs-callout-danger"><h5>{{title}}</h5></div><form class="row block" role="form" ng-submit="cateAdd()"><div class="form-group col-xs-12"><label for="type" class="col-sm-2 control-label">所属系统</label><div class="col-sm-10"><select ng-model="cateInfo.site" ng-options="str.name for str in sites" class="input-lg form-control"></select></div></div><div class="form-group col-xs-12"><label for="type" class="col-sm-2 control-label">所属城市</label><div class="col-sm-10"><select ng-model="cateInfo.location" ng-options="location.name for location in locations" class="input-lg form-control"></select></div></div><div class="form-group col-xs-12"><label for="type" class="col-sm-2 control-label">一级分类</label><div class="col-sm-10"><select ng-model="cateInfo.category" ng-change="getSecond()" ng-options="str.name for str in newTop" class="input-lg form-control"><option value="">--选择上级分类--</option></select></div></div><div class="form-group col-xs-12"><label for="type" class="col-sm-2 control-label">二级分类</label><div class="col-sm-10"><select ng-model="cateInfo.childCate" ng-multiple="true" ng-options="str.name for str in newSecond" ng-change="getThird()" class="input-lg form-control"><option value="">--选择分类类型--</option></select></div></div><div class="form-group col-xs-12"><label for="tel" class="col-sm-2 control-label">映射名称</label><div class="col-sm-10"><input type="text" required="" class="input-lg form-control" ng-model="cateInfo.name" name="catename" placeholder="请输入映射名称"></div></div><div class="form-group col-xs-12"><label for="weight" class="col-sm-2 control-label">权重[越大越靠前]</label><div class="col-sm-10"><input type="number" required="" class="input-lg form-control" ng-model="cateInfo.weight" name="weight" placeholder="请输入权重值"></div></div><div class="form-group col-xs-12"><div class="col-sm-offset-2 col-sm-10"><button type="submit" class="btn btn-success col-xs-12 btn-lg">保存</button></div></div><div class="form-group col-xs-12"><div class="col-sm-offset-2 col-sm-10"><button type="button" ng-click="reback()" class="btn btn-default col-xs-12 btn-lg">取消</button></div></div></form></div>'),t.put("app/modules/category/map_list.html",'<div class="col-xs-offset-2"><div class="bs-callout bs-callout-danger"><h5>{{title}}</h5></div><div class="bs-callout"><div class="mt-10 text-left"><div class="form-group row"><div class="col-xs-4"><a class="btn btn-success btn-lg btn-block" ui-sref="home.cateMapAdd">添加分类映射</a></div></div></div><div class="block mt-10 ml-default"><form class="form-inline" role="form"><div class="form-group"><div class="input-group"><select ng-model="locate" class="form-control" ng-options="location.name for location in locations"><option>--选择所属城市--</option></select></div></div><div class="form-group"><div class="input-group"><div class="input-group-addon">关键词</div><input type="text" ng-model="key" class="form-control" placeholder="分类名"></div></div><div class="form-group"><button class="btn-block btn btn-info" ng-click="search(0);">筛选</button></div><div class="form-group"><button class="btn btn-block btn-warning" ng-click="search(1);">重置</button></div></form></div></div><div class="table-responsive" style="margin-top:10px;"><table class="table table-bordered table-striped table-hover"><colgroup><col class="col-xs-1"><col class="col-xs-1"><col class="col-xs-3"><col class="col-xs-2"><col class="col-xs-2"><col class="col-xs-3"></colgroup><thead><tr><td class="text-center"><h5>编号</h5></td><td class="text-center"><h5>分类权重</h5></td><td class="text-center"><h5>分类名</h5></td><td class="text-center"><h5>分类状态</h5></td><td class="text-center"><h5>上次更新时间</h5></td><td class="text-center"><h5>操作</h5></td></tr></thead><tbody ng-if="list.length===0"><tr><td colspan="6" class="text-center"><h5>暂无数据</h5></td></tr></tbody><tbody><tr ng-repeat="item in list"><td class="text-center"><h5>{{item.id}}</h5></td><td class="text-center"><h5>{{item.weight}}</h5></td><td class="text-center"><h5>{{item.name}}</h5></td><td class="text-center"><h5 ng-if="item.status == 1">有效</h5><h5 ng-if="item.status == 0">无效</h5></td><td class="text-center"><h5>{{item.updated_time}}</h5></td><td class="text-center"><h5><a class="btn btn-primary btn_mb5 btn-sm" ui-sref="home.editMap({id:item.id})">编辑分类</a> <a class="btn btn-danger btn-sm btn_mb5" ng-click="setStatus($index, 0)" ng-show="item.status == 1">禁用分类</a> <a class="btn btn-success btn-sm btn_mb5" ng-click="setStatus($index, 1)" ng-show="item.status == 0">启用分类</a></h5></td></tr></tbody></table></div><nav><dachu-pagination conf="paginationConf"></dachu-pagination></nav></div>'),t.put("app/modules/goods/add.html",'<script type="text/ng-template" id="myModalContent.html"><div class="modal-header"> <h3 class="modal-title">{{items.headerText}}</h3> </div> <div class="modal-body"> <h2 class="text-center">{{items.bodyText}}</h2> </div> <div class="modal-footer"> <button class="btn btn-primary" ng-click="ok()" ng-if="items.actionText"> {{items.actionText}} </button> <button class="btn btn-warning" ng-click="cancel()">{{items.closeText}}</button> </div></script><div class="col-xs-offset-2"><div class="bs-callout bs-callout-danger"><h5>{{title}}</h5></div><div class="row block"><form role="form"><div class="form-group col-xs-12"><label for="exampleInputPassword1"><h6><b><em class="text-danger">*</em> 大品类</b></h6></label><select ng-change="getChilds(init.category_id.id, \'secondCategory\', \'seconds\')" ng-model="init.category_id" class="input-md form-control" ng-options="m.name for m in topCategory" required=""><option value="">选择大品类</option></select></div><div class="form-group col-xs-12" style="{{cate_style}}"><label for="exampleInputPassword1"><h6><b><em class="text-danger">*</em> 小品类</b></h6></label><select ng-model="init.childid" ng-change="getChilds(init.childid.id, \'productCategory\', \'secondChild\')" class="input-md form-control" ng-options="m.name for m in secondCategory" required=""><option value="">选择小品类</option></select></div><div class="form-group col-xs-12"><label for="exampleInputPassword1"><h6><b><em class="text-danger">*</em> 选择货物分类</b></h6></label><select ng-model="init.productid" class="input-md form-control" ng-options="m.name for m in productCategory" ng-change="getChilds(init.productid.id, \'productsChild\', \'thirdChild\')" required=""><option value="">选择货物分类</option></select></div><div class="form-group col-xs-12" ng-if="productsChild.length > 0"><label for="exampleInputPassword1"><h6><b>品种</b></h6></label><select ng-model="init.productidChild" class="input-md form-control" ng-options="m.name for m in productsChild"><option value="">--选择品种--</option></select></div><div class="form-group col-xs-12"><label for="exampleInputPassword1"><h6><b><em class="text-danger">*</em> 货物标题</b></h6></label> <input type="text" class="input-md form-control" ng-model="product.title"></div><div class="form-group col-xs-12" ng-if="properties"><label for="exampleInputPassword1"><h6><b><em class="text-danger">*</em> 规格</b></h6></label><div class="col-xs-12" ng-repeat="prop in properties"><div class="col-xs-1"><h5><b>{{prop.name}}</b></h5></div><div class="col-xs-9"><span><input ng-if="prop.is_required==1 && prop.input_type==0" ng-model="init.spec[prop.id]" type="text" class="col-xs-4 input-md fomr-control" required=""> <input ng-if="prop.is_required==0 && prop.input_type==0" ng-model="init.spec[prop.id]" type="text" class="col-xs-4 input-md fomr-control"></span></div></div></div><div class="form-group col-xs-12"><div class="col-xs-6" ng-repeat="button in buttons"><button type="{{button.type}}" class="btn btn-block {{button.cls}} btn-md" ng-click="{{button.clk}}({{id}})">{{button.name}}</button></div></div></form></div></div><div class="block-title"></div>'),t.put("app/modules/goods/list.html",'<div class="col-xs-offset-2"><div class="bs-callout bs-callout-danger"><h5>{{title}}</h5></div><div class="bs-callout"><div class="mt-10"><div class="form-group row"><div class="col-xs-4"><a class="btn-block btn btn-info" ui-sref="home.goodsAdd">发布货物</a></div></div></div><div class="block mt-10"><a ng-click="filterByStatus(\'all\');" ng-class="{\'btn-info\': status == \'all\'}" class="btn">全部 <span class="badge">{{total[4]}}</span></a> <a ng-click="filterByStatus(\'1\');" ng-class="{\'btn-info\': status == \'1\'}" class="btn">已上架 <span class="badge">{{total[2]}}</span></a> <a ng-click="filterByStatus(\'0\');" ng-class="{\'btn-info\': status == \'0\'}" class="btn">已下架 <span class="badge">{{total[2]}}</span></a></div><div class="block mt-10 ml-default"><form class="form-inline" role="form"><div class="form-group"><div class="input-group"><div class="input-group-addon">关键词</div><input type="text" ng-model="key" class="form-control" placeholder="请输入货物名或货号"></div></div><div class="form-group"><button class="btn-block btn btn-info" ng-click="search();">筛选</button></div><div class="form-group"><button class="btn btn-block btn-warning" ng-click="reset();">重置</button></div></form></div></div><div class="table-responsive" style="margin-top:10px;"><table class="table table-bordered table-striped table-hover"><colgroup><col class="col-xs-1"><col class="col-xs-1"><col class="col-xs-2"><col class="col-xs-2"><col class="col-xs-2"><col class="col-xs-2"><col class="col-xs-2"></colgroup><thead><tr><td class="text-center"><h5><em class="text-danger">货号</em></h5></td><td class="text-center"><h5>内部名称</h5></td><td class="text-center"><h5>货物状态</h5></td><td class="text-center"><h5>货物规格</h5></td><td class="text-center"><h5>上一次更新时间</h5></td><td class="text-center"><h5>操作</h5></td></tr></thead><tbody ng-if="products.length===0"><tr><td colspan="6" class="text-center"><h5>暂无数据</h5></td></tr></tbody><tbody><tr ng-repeat="item in products"><td class="text-center"><h5><em class="text-danger">{{item.sku_number}}</em></h5></td><td class="text-center"><h5>{{item.name}}</h5></td><td class="text-center"><h5><span class="label label-success" ng-if="item.status == 1">启用</span> <span class="label label-danger" ng-if="item.status == 0">禁用</span></h5></td><td class="text-left"><h5 ng-repeat="desc in item.description"><em class="text-danger">{{desc.name}}:</em> &nbsp;{{desc.val}}</h5></td><td class="text-center"><h5>{{item.updated_time}}</h5></td><td class="text-center"><h5><a class="btn btn-info btn-sm btn_mb5" ui-sref="home.GoodsEdit({productId:item.id})">编辑</a> <a ng-if="item.status == 1" class="btn btn-danger btn-sm btn_mb5" ng-click="setstatus({{item.id}}, 0, $index)">禁用</a> <a ng-if="item.status == 0" class="btn btn-success btn-sm btn_mb5" ng-click="setstatus({{item.id}}, 1, $index)">启用</a></h5></td></tr></tbody></table></div><nav><dachu-pagination conf="paginationConf"></dachu-pagination></nav></div>'),t.put("app/modules/goods/tips.html",'<script type="text/ng-template" id="myModalContent.html"><div class="modal-header"> <h3 class="modal-title">{{items.headerText}}</h3> </div> <div class="modal-body"> <div class="row form-horizontal"> <div class="col-xs-12 form-group"> <select ng-model="selectCity" ng-change="items.cityChange(selectCity)" class="form-control" ng-options="item.name for item in items.bodyText"> <option value="">请选择所在城市</option> </select> </div> <div class="col-xs-12 form-group"> <select ng-model="selectMarket" class="form-control" ng-options="item.name for item in items.markets"> <option value="">请选择所在市场</option> </select> </div> </div> </div> <div class="modal-footer"> <button class="btn btn-primary" ng-click="items.ok(selectCity, selectMarket);cancel();" ng-if="items.actionText"> {{items.actionText}} </button> <button class="btn btn-warning" ng-click="cancel()">{{items.closeText}}</button> </div></script>'),t.put("app/modules/home/achieve.html",'<div class="container-fluid" ng-controller="HomeAchieveCtrl"><div ng-include="\'components/navbar/navbar.html\'"></div><div id="row block-title"><div ng-include="\'components/navbar/navsidebar.html\'"></div><div class="col-xs-offset-2 col-xs-10"><div class="row block block-col text-center" ng-if="data==\'\'"><h5>暂无记录</h5></div><div ng-if="data"><table class="table table-bordered table-striped"><colgroup><col class="col-xs-3"><col class="col-xs-3"><col class="col-xs-3"><col class="col-xs-3"></colgroup><tbody><tr><td class="text-center"><h5>今日新增供应商</h5></td><td class="text-center"><h5>{{data.today_new_seller}}</h5></td><td class="text-center"><h5>总供应商</h5></td><td class="text-center"><h5>{{data.total_seller}}</h5></td></tr><tr><td class="text-center"><h5>今日新增采购商</h5></td><td class="text-center"><h5>{{data.today_new_buyer}}</h5></td><td class="text-center"><h5>总采购商</h5></td><td class="text-center"><h5>{{data.total_buyer}}</h5></td></tr><tr><td class="text-center"><h5>今日订单数</h5></td><td class="text-center"><h5>{{data.today_new_order}}</h5></td><td class="text-center"><h5>总订单数</h5></td><td class="text-center"><h5>{{data.total_order}}</h5></td></tr><tr><td class="text-center"><h5>今日订单金额</h5></td><td class="text-center"><h5>{{data.today_deal_amount}}&nbsp;元</h5></td><td class="text-center"><h5>总订单金额</h5></td><td class="text-center"><h5>{{data.total_deal_amount}}&nbsp;元</h5></td></tr><tr><td class="text-center"><h5>今日新商品数</h5></td><td class="text-center"><h5>{{data.today_new_product}}</h5></td><td class="text-center"><h5>总商品数</h5></td><td class="text-center"><h5>{{data.total_product}}</h5></td></tr></tbody></table></div></div></div></div>'),t.put("app/modules/home/home.html",'<div class="container-fluid" ng-controller="HomeCtrl"><div ng-include="\'components/navbar/navbar.html\'"></div><div id="row block-title"><div ng-include="\'components/navbar/navsidebar.html\'"></div><div ui-view=""></div></div></div>'),t.put("app/modules/property/add.html",'<script type="text/ng-template" id="myModalContent.html"><div class="modal-header"> <h3 class="modal-title">{{items.headerText}}</h3> </div> <div class="modal-body"> <h2 class="text-center">{{items.bodyText}}</h2> </div> <div class="modal-footer"> <button class="btn btn-primary" ng-click="items.ok();cancel();" ng-if="items.actionText"> {{items.actionText}} </button> <button class="btn btn-warning" ng-click="items.close();cancel()">{{items.closeText}}</button> </div></script><div class="col-xs-offset-2"><div class="bs-callout bs-callout-danger"><h5>{{title}}</h5></div><form class="row block" role="form" ng-submit="createProperty()"><div class="form-group col-xs-12"><label for="tel" class="col-sm-2 control-label"><h5><b>一级分类</b></h5></label><div class="col-sm-10"><select ng-model="top" class="form-control input-lg" ng-options="topCate.name for topCate in topCategory" ng-change="getSecond()" required=""><option value="">选择一级分类</option></select></div></div><div class="form-group col-xs-12"><label for="tel" class="col-sm-2 control-label"><h5><b>二级分类</b></h5></label><div class="col-sm-10"><select ng-model="second" class="form-control input-lg" ng-options="secondCate.name for secondCate in secondCategory" ng-change="getProduct()"><option value="">选择二级分类</option></select></div></div><div class="form-group col-xs-12"><label for="tel" class="col-sm-2 control-label"><h5><b>产品名称</b></h5></label><div class="col-sm-10"><select ng-model="products" class="form-control input-lg" ng-options="p.name for p in productCategory"><option value="">选择三级分类</option></select></div></div><div class="form-group col-xs-12"><label for="type" class="col-sm-2 control-label"><h5><b>规格类型</b></h5></label><div class="col-sm-10"><select ng-model="propertyShow" class="form-control input-lg" ng-options="m.name for m in properties" ng-change="setProType()"><option value="">选择规格类型</option></select></div></div><div class="form-group col-xs-12"><label for="type" class="col-sm-2 control-label"><h5><b>是否必填</b></h5></label><div class="col-sm-10"><select ng-model="propertyRequired" class="form-control input-lg" ng-options="m.name for m in requires" required=""><option value="">选择一项</option></select></div></div><div class="form-group col-xs-12"><label for="name" class="col-sm-2 control-label"><h5><b>规格名称</b></h5></label><div class="col-sm-10"><input type="text" ng-minlength="2" required="" class="input-lg form-control" name="name" ng-model="saveData.name" id="name" placeholder="请输入规格名称"></div></div><div class="form-group col-xs-12" ng-if="propertyValues.length"><label for="name" class="col-sm-2 control-label"><h5><b>规格选项</b></h5></label><div class="mt-10" ng-repeat="item in propertyValues"><div class="col-xs-4 mt-10"><input type="text" ng-model="item.value" class="input-lg form-control" name="name_value" id="name_value" required="" placeholder="请输入规格选项值"></div><div class="col-xs-5 mt-10"><span class="btn btn-lg {{item.cls}}" ng-click="{{item.clk}}($index)"><span class="glyphicon {{item.icon}}">{{item.name}}</span></span></div></div></div><div class="form-group col-xs-12"><div class="col-sm-offset-2 col-sm-10"><div class="row block-btn"><div class="col-xs-12"><button type="submit" class="btn btn-success btn-lg btn-block">保存</button></div></div><div class="row block-btn"><div class="col-xs-12"><button ng-click="reback()" type="button" class="btn btn-default btn-lg btn-block">取消</button></div></div></div></div></form></div>'),t.put("app/modules/property/edit.html",'<div class="container-fluid" ng-controller="PropertyEditCtrl"><div ng-controller="PropertyAddCtrl"><div ng-include="\'components/subnavbar/subnavbar.html\'" ng-init="pageTitle=\'产品规格录入\'"></div><script type="text/ng-template" id="myModalContent.html"><div class="modal-header"> <h3 class="modal-title">{{items.headerText}}</h3> </div> <div class="modal-body"> <h2 class="text-center">{{items.bodyText}}</h2> </div> <div class="modal-footer"> <button class="btn btn-primary" ng-click="items.ok();cancel();" ng-if="items.actionText"> {{items.actionText}} </button> <button class="btn btn-warning" ng-click="items.close();cancel()">{{items.closeText}}</button> </div></script><form class="row block block-col form-horizontal" role="form" ng-submit="saveProperty()"><div class="form-group col-xs-12"><label for="tel" class="col-sm-2 control-label"><h5><b>一级分类</b></h5></label><div class="col-sm-10"><select ng-model="top" class="form-control input-lg" ng-options="topCate.name for topCate in topCategory" ng-change="getSecond()" required=""><option value="">选择一级分类</option></select></div></div><div class="form-group col-xs-12"><label for="tel" class="col-sm-2 control-label"><h5><b>二级分类</b></h5></label><div class="col-sm-10"><select ng-model="second" class="form-control input-lg" ng-options="secondCate.name for secondCate in secondCategory" ng-change="getProduct()" required=""><option value="">选择二级分类</option></select></div></div><div class="form-group col-xs-12"><label for="tel" class="col-sm-2 control-label"><h5><b>产品名称</b></h5></label><div class="col-sm-10"><select ng-model="products" class="form-control input-lg" ng-options="p.name for p in productCategory" required=""><option value="">选择三级分类</option></select></div></div><div class="form-group col-xs-12"><label for="type" class="col-sm-2 control-label"><h5><b>规格类型</b></h5></label><div class="col-sm-10"><select ng-model="property_show" class="form-control input-lg" ng-options="m.name for m in properties" ng-change="setProType()" required=""><option value="">选择规格类型</option></select></div></div><div class="form-group col-xs-12"><label for="type" class="col-sm-2 control-label"><h5><b>是否必填</b></h5></label><div class="col-sm-10"><select ng-model="property_required" class="form-control input-lg" ng-options="m.name for m in requires" required=""><option value="">选择一项</option></select></div></div><div class="form-group col-xs-12"><label for="name" class="col-sm-2 control-label"><h5><b>规格名称</b></h5></label><div class="col-sm-10"><input type="text" ng-minlength="2" required="" class="input-lg form-control" name="name" ng-model="saveData.name" id="name" placeholder="请输入规格名称"></div></div><div class="form-group col-xs-12" ng-if="property_values.length"><label for="name" class="col-sm-2 control-label"><h5><b>规格选项</b></h5></label><div class="mt-10" ng-repeat="item in property_values"><div class="col-xs-8 mt-10"><input type="text" ng-model="item.value" class="input-lg form-control" name="name_value" id="name_value" required="" placeholder="请输入规格选项值"></div><div class="col-xs-4 mt-10"><span class="btn btn-lg {{item.cls}}" ng-click="{{item.clk}}($index)"><span class="glyphicon {{item.icon}}">{{item.name}}</span></span></div></div></div><div class="form-group col-xs-12"><label for="unit" class="col-sm-2 control-label"><h5><b>规格单位</b></h5></label><div class="col-sm-10"><input type="text" class="input-lg form-control" ng-model="saveData.unit" name="unit" id="unit" placeholder="请输入规格单位"></div></div><div class="form-group col-xs-12"><div class="col-sm-offset-2 col-sm-10"><div class="row block-btn"><div class="col-xs-12"><button type="submit" class="btn btn-success btn-lg btn-block">保存</button></div></div><div class="row block-btn"><div class="col-xs-12"><button type="button" class="btn btn-default btn-lg btn-block">取消</button></div></div></div></div></form></div></div><div ng-include="\'components/footer/footer.html\'"></div>'),t.put("app/modules/property/list.html",'<div class="col-xs-offset-2"><div class="bs-callout bs-callout-danger"><h5>{{title}}</h5></div><div class="bs-callout"><div class="mt-10"><div class="form-group"><a class="btn-block btn btn-info" ui-sref="home.propertyAdd">添加规格</a></div></div></div><div class="table-responsive" style="margin-top:10px;"><table class="table table-bordered table-striped table-hover"><colgroup><col class="col-xs-1"><col class="col-xs-1"><col class="col-xs-2"><col class="col-xs-2"><col class="col-xs-2"><col class="col-xs-2"><col class="col-xs-2"><col class="col-xs-3"></colgroup><thead><tr><td class="text-center"><h5>编号</h5></td><td class="text-center"><h5>分类名称</h5></td><td class="text-center"><h5>规格名称</h5></td><td class="text-center"><h5>必填</h5></td><td class="text-center"><h5>状态</h5></td><td class="text-center"><h5>上一次更新时间</h5></td><td class="text-center"><h5>操作</h5></td></tr></thead><tbody ng-if="list.length===0"><tr><td colspan="8" class="text-center"><h5>暂无数据</h5></td></tr></tbody><tbody><tr ng-repeat="item in list"><td class="text-center"><h5>{{item.id}}</h5></td><td class="text-center"><h5>{{item.cate_name}}</h5></td><td class="text-center"><h5>{{item.name}}</h5></td><td class="text-center"><h5><span ng-if="item.is_required == 1">必填</span> <span ng-if="item.is_required == 0">选填</span></h5></td><td class="text-center"><h5><span ng-if="item.status == 1">有效</span> <span ng-if="item.status == 0">无效</span></h5></td><td class="text-center"><h5>{{item.updated_time}}</h5></td><td class="text-center"><h5><a ng-if="item.status == 1" class="btn btn-danger btn-sm btn_mb5" ng-click="setStatus($index, 0)">禁用规格</a> <a ng-if="item.status == 0" class="btn btn-success btn-sm btn_mb5" ng-click="setStatus($index, 1)">启用规格</a></h5></td></tr></tbody></table></div><nav><dachu-pagination conf="paginationConf"></dachu-pagination></nav></div>'),t.put("app/modules/user/create.html",'<div class="container-fluid" ng-controller="UserCreateCtrl"><div class="width_change" id="row block-title"><div class="col-sm-offset-2 col-sm-10 col-xs-12"><div class="bs-callout bs-callout-danger"><h5>添加用户</h5></div><div class="form-group" ng-show="basic_form.$invalid && basic_form.$dirty && show_error"><div class="col-sm-12"><div class="alert alert-danger"><ul><li ng-show="basic_form.dept.$error.required">请选择部门！</li><li ng-show="basic_form.role.$error.required">请选择用户角色！</li><li ng-show="basic_form.mobile.$error.required">请输入手机号码！</li><li ng-show="basic_form.mobile.$error.pattern">手机号码格式不对！</li><li ng-show="basic_form.name.$error.required">请输入用户姓名！</li><li ng-show="basic_form.province.$error.required">请选择所在地！</li></ul></div></div></div><div class="block mt-10 ml-default"><form class="form-horizontal showcase-form" role="form" id="basic_form" name="basic_form"><div class="form-group"><label class="col-sm-2 control-label">所属部门：</label><div class="col-sm-10"><select ng-model="data.dept" class="form-control" name="dept" ng-options="m.pre_name for m in dept_list" required=""><option value="">请选择用户所属部门</option></select></div></div><div class="form-group"><label class="col-sm-2 control-label">用户角色：</label><div class="col-sm-10"><select ng-model="data.role" class="form-control" name="role" ng-options="m.name for m in role_list" required=""><option value="">请选择用户角色类型</option></select></div></div><div class="form-group"><label class="col-sm-2 control-label">手机号：</label><div class="col-sm-10"><input type="text" ng-model="data.mobile" name="mobile" class="form-control" placeholder="请输入手机号码" required="" ng-pattern="/^[1-9]{1}[0-9]{10}$/"></div></div><div class="form-group"><label class="col-sm-2 control-label">姓名：</label><div class="col-sm-10"><input type="text" name="name" ng-model="data.name" class="form-control" placeholder="请输入姓名" required=""></div></div><div class="form-group"><label class="col-sm-2 control-label">所在地：</label><div class="col-sm-10"><select ng-model="data.province" class="form-control" name="province" ng-options="m.name for m in province_list" ng-change="get_market(\'province\');" required=""><option value="">选择省份</option></select></div></div><div class="form-group"><label class="col-sm-2 control-label">详细地址：</label><div class="col-sm-10"><input type="text" ng-model="data.address" class="form-control" placeholder="请输入详细地址"></div></div><div class="form-group"><button class="btn btn-info btn-lg col-sm-3 col-sm-offset-1" ng-click="create();">提交</button> <button class="btn btn-warning btn-lg col-sm-3 col-sm-offset-1" ng-click="reset()">重置</button></div></form></div></div></div></div>'),t.put("app/modules/user/edit.html",'<div class="container-fluid"><div class="width_change" id="row block-title"><div class="col-sm-offset-2 col-sm-10 col-xs-12"><div class="bs-callout bs-callout-danger"><h5>编辑用户</h5></div><div class="form-group" ng-show="basic_form.$invalid && basic_form.$dirty && show_error"><div class="col-sm-12"><div class="alert alert-danger"><ul><li ng-show="basic_form.dept.$error.required">请选择部门！</li><li ng-show="basic_form.role.$error.required">请选择用户角色！</li><li ng-show="basic_form.mobile.$error.required">请输入手机号码！</li><li ng-show="basic_form.mobile.$error.pattern">手机号码格式不对！</li><li ng-show="basic_form.name.$error.required">请输入用户姓名！</li><li ng-show="basic_form.province.$error.required">请选择所在地！</li></ul></div></div></div><div class="block mt-10 ml-default"><form class="form-horizontal showcase-form" role="form" id="basic_form" name="basic_form"><div class="form-group"><label class="col-sm-2 control-label">所属部门：</label><div class="col-sm-10"><select ng-model="data.dept" class="form-control" name="dept" ng-options="m.pre_name for m in dept_list" required=""><option value="">请选择用户所属部门</option></select></div></div><div class="form-group"><label class="col-sm-2 control-label">用户角色：</label><div class="col-sm-10"><select ng-model="data.role" class="form-control" name="role" ng-options="m.name for m in role_list" required=""><option value="">请选择用户角色类型</option></select></div></div><div class="form-group"><label class="col-sm-2 control-label">手机号：</label><div class="col-sm-10"><input type="text" ng-model="data.mobile" name="mobile" class="form-control" placeholder="请输入手机号码" required="" ng-pattern="/^[1-9]{1}[0-9]{10}$/"></div></div><div class="form-group"><label class="col-sm-2 control-label">姓名：</label><div class="col-sm-10"><input type="text" name="name" ng-model="data.name" class="form-control" placeholder="请输入姓名" required=""></div></div><div class="form-group"><label class="col-sm-2 control-label">所在地：</label><div class="col-sm-10"><select ng-model="data.province" class="form-control" name="province" ng-options="m.name for m in province_list" ng-change="get_market(\'province\');" required=""><option value="">选择省份</option></select></div></div><div class="form-group"><label class="col-sm-2 control-label">详细地址：</label><div class="col-sm-10"><input type="text" ng-model="data.address" class="form-control" placeholder="请输入详细地址"></div></div><div class="form-group"><button class="btn btn-info btn-lg col-sm-3 col-sm-offset-1" ng-click="edit();">提交</button> <button class="btn btn-warning btn-lg col-sm-3 col-sm-offset-1" ng-click="reset()">重置</button></div></form></div></div></div></div>'),t.put("app/modules/user/list.html",'<div class="container-fluid" ng-controller="UserListCtrl"><div class="width_change" id="row block-title"><div class="col-xs-offset-2"><div class="bs-callout bs-callout-danger"><h5>用户列表</h5></div><div class="bs-callout"><div class="block mt-10 ml-default"><form class="form-inline" role="form"><div class="form-group"><select ng-model="role" class="form-control" name="role" ng-options="m.name for m in role_list"><option value="">请选择角色类型</option></select></div><div class="form-group"><div class="input-group"><input type="text" ng-model="searchValue" class="form-control" placeholder="请输入搜索关键词"><div class="input-group-addon">起始时间</div><input type="text" is-open="opened" datepicker-popup="yyyy-MM-dd" ng-click="open($event)" datepicker-options="dateOptions" class="form-control" ng-model="startTime" id="startTime" placeholder="点击获取时间"></div></div><div class="form-group"><div class="input-group"><div class="input-group-addon">截止时间</div><input type="text" ng-model="endTime" class="form-control" datepicker-popup="yyyy-MM-dd" datepicker-options="endDateOptions" ng-click="endOpen($event)" is-open="endOpened" id="endTime" placeholder="点击获取时间"></div></div><div class="form-group"><button class="btn-block btn btn-info" ng-click="search();">筛选</button></div><div class="form-group"><button class="btn btn-block btn-warning" ng-click="reset()">重置</button></div><div class="form-group"><button class="btn btn-block btn-primary" ng-click="exportData()">导出数据</button></div><div class="form-group"><a class="btn btn-primary btn-sm" href="/user/create">添加用户</a></div></form></div></div><div style="margin-top:10px;" class="table-responsive"><table class="table table-bordered table-striped table-hover"><colgroup><col class="col-xs-1"><col class="col-xs-1"><col class="col-xs-1"><col class="col-xs-2"><col class="col-xs-2"><col class="col-xs-2"><col class="col-xs-3"></colgroup><thead><tr><td class="text-center"><h5>编号</h5></td><td class="text-center"><h5>姓名</h5></td><td class="text-center"><h5>角色</h5></td><td class="text-center"><h5>手机号</h5></td><td class="text-center"><h5>注册时间</h5></td><td class="text-center"><h5>操作</h5></td></tr></thead><tbody ng-if="list.length===0"><tr><td colspan="8" class="text-center"><h5>暂无数据</h5></td></tr></tbody><tbody ng-if="list.length>0"><tr ng-repeat="item in list"><td class="text-center"><h5>{{item.id}}</h5></td><td class="text-center"><h5>{{item.name}}</h5></td><td class="text-center"><h5>{{item.role}}</h5></td><td class="text-center"><h5>{{item.mobile}}</h5></td><td class="text-center"><h5>{{item.created_time}}</h5></td><td class="text-center"><h5><a class="btn btn-info btn-sm btn_mb5" href="/user/edit/{{item.id}}">编辑用户</a> <a class="btn btn-danger btn-sm btn_mb5" ng-click="setStatus($index, 0)" ng-if="item.status == 1">禁用账号</a> <a class="btn btn-success btn-sm btn_mb5" ng-click="setStatus($index, 1)" ng-if="item.status == 0">启用账号</a> <a class="btn btn-info btn-sm btn_mb5" ng-click="resetPassword($index)">重置密码</a></h5></td></tr></tbody></table></div><nav><dachu-pagination conf="paginationConf"></dachu-pagination></nav></div></div></div>'),t.put("app/modules/user/login.html",'<div class="container-fluid"><div ng-include="\'components/navbar/navbar.html\'" ng-init="isLogin=\'false\'"></div><div class="row login_b show-grid"><div class="col-md-12 col-xs-12"><div class="clogin col-md-4 col-md-offset-4"><h3 class="clogin_h3" ng-controller="TopCtrl">{{title}}</h3><p ng-show="error" class="{{error.cls}}">{{error.msg}}</p><form class="row block block-col form-horizontal" name="loginForm" role="form" novalidate="" ng-submit="login()"><div class="form-group c_loginb col-xs-12"><div class="col-sm-12"><input type="tel" required="" class="input-lg form-control" ng-model="user.mobile" ng-pattern="/^1[3|5|6|7|8|9]\\d{9}$/" ng-minlength="11" ng-maxlength="11" name="mobile" id="tel" placeholder="请输入手机号"><div class="col-xs-12 block-col label label-danger" ng-show="(loginForm.submitted || loginForm.mobile.$dirty) && loginForm.mobile.$invalid"><small ng-show="loginForm.mobile.$error.minlength">请输入正确的手机号</small> <small ng-show="!loginForm.mobile.$error.minlength && loginForm.mobile.$error.pattern">手机号格式不正确</small> <small ng-show="loginForm.mobile.$error.required">手机号必填</small></div></div></div><div class="form-group c_loginb col-xs-12"><div class="col-sm-12"><input type="password" required="" class="input-lg form-control" ng-minlength="6" ng-model="user.password" name="password" id="password" placeholder="请输入密码"><div class="col-xs-12 block-col label label-danger" ng-show="loginForm.submitted && loginForm.password.$invalid"><small ng-show="loginForm.password.$error.minlength">密码至少6位</small> <small ng-show="loginForm.password.$error.required">密码必填</small></div></div></div><div class="form-group col-xs-12"><div class="col-sm-12"><button type="submit" class="btn btn-success btn-block">登录</button></div></div></form></div></div></div></div>')
}]);